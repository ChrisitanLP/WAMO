// Variables
$chat-border-color: #e0e0e0;
$hover-bg-color: #f0f0f0;
$shadow-color: rgba(0, 0, 0, 0.1);
$text-color-primary: #333;
$text-color-secondary: #666;
$unread-badge-color: #25D366;
$close-icon-color: #f76868;
$close-icon-hover-color: #b40000;
$ready-icon-color: #7dfc84;
$ready-icon-hover-color: #04e73d;

// Mixins
@mixin flex-container($direction: row) {
  display: flex;
  flex-direction: $direction;
}

@mixin transition($property...) {
  transition: $property;
}

@mixin shadow($shadow...) {
  box-shadow: $shadow;
}

// Estilos principales
#chats_messages_contacts_whatsapp {
  .chats-and-contacts-container {
    overflow: hidden;
    flex: 1;
    @include flex-container(row);
    
    .chats, .contacts, .status {
      flex: 1;
      padding: 1rem;
      background-color: #ffffff;
      @include shadow(0 3px 6px $shadow-color);
      overflow-y: auto;
    }
    
    .chats {
      max-height: calc(100vh - 3.75rem);
      flex: 1;
      overflow-y: auto;
      
      // Elementos de chat
      .chat-item {
        @include flex-container;
        align-items: center;
        border-bottom: 1px solid $chat-border-color;
        padding: 0.625rem;
        @include transition(background-color 0.2s, box-shadow 0.2s);
        cursor: pointer;
        position: relative;
        
        &:last-child {
          border-bottom: none;
        }
        
        &:hover {
          background-color: $hover-bg-color;
          @include shadow(0 4px 8px $shadow-color);
        }
        
        // Foto de perfil
        .profile-pic {
          width: 3.125rem;
          height: 3.125rem;
          border-radius: 50%;
          overflow: hidden;
          margin-right: 0.625rem;
          flex-shrink: 0;
          
          img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            cursor: pointer;
          }
        }
        
        // Información del chat
        .chat-info {
          flex: 1;
          min-width: 0; // Permite que text-overflow funcione correctamente
          
          .chat-name {
            font-weight: bold;
            color: $text-color-primary;
            margin-bottom: 0.25rem;
          }
          
          .last-message {
            color: $text-color-secondary;
            font-size: 0.9em;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            
            &.highlighted {
              font-weight: bold;
              color: darken($text-color-secondary, 15%);
            }
            
            .message-icon {
              width: 1.25rem;
              height: 1.25rem;
              vertical-align: middle;
              margin-right: 0.3125rem;
              color: #747474;
            }
          }
        }
        
        // Botones de acción
        .chat-actions {
          display: flex;
          margin-left: auto;
        }
        
        .chat-close-icon, .chat-ready-icon {
          margin-left: 0.5rem;
          padding: 0 0.5rem;
          font-size: 1.5rem;
          cursor: pointer;
          z-index: 10;
          @include transition(color 0.2s);
        }
        
        .chat-close-icon {
          color: $close-icon-color;
          
          &:hover {
            color: $close-icon-hover-color;
          }
        }
        
        .chat-ready-icon {
          color: $ready-icon-color;
          
          &:hover {
            color: $ready-icon-hover-color;
          }
        }
        
        // Contador de mensajes no leídos
        .unread-count {
          background-color: $unread-badge-color;
          color: white;
          border-radius: 12px;
          padding: 0 0.375rem;
          font-size: 0.75rem;
          margin-left: 0.625rem;
          min-width: 1.25rem;
          height: 1.25rem;
          display: flex;
          align-items: center;
          justify-content: center;
        }
      }
    }
  }
}